<!doctype html>
<html>
 <head>
  <meta charset="utf-8">
  <style>
   circle.node {
    stroke: none;
    opacity: 0.7;
   }
   line.link {
    stroke-opacity: 0.6;
   }
   .label {
    font-family: sans-serif;
    font-size: 11px;
    fill: red;
   }
  </style>
  <title>Greek Tree</title>
  <script src="http://www.d3plus.org/js/d3.js"></script>
  <script src="http://www.d3plus.org/js/d3plus.js"></script>
 </head>
 
 <body>
  <script>
   var w = window.innerWidth;
			var h = window.innerHeight;
			var width = 1200
			var height = 1200
   
   var svg = d3.select("body")
    .append("svg")
    .attr("width", width)
    .attr("height", height);
    
   var force = d3.layout.force()
    .charge(-180)
    .linkDistance(70)
    .size([width, height]);
   
   d3.json("data.json", function(data) {
    force.nodes(data.nodes)
     .links(data.links)
     .start();
    
    var node = svg.selectAll("circle.node")
     .data(data.nodes)
     .enter()
     .append("g")
     .call(force.drag);
    
    var link = svg.append("g")
     .selectAll("line.link")
     .data(data.links)
     .enter()
     .append("line")
     .attr("stroke", function(d) { return link_color(d.value); })
     .attr("stroke-width", function(d) { return link_width(d.value); })
     .attr("class", "link");
    
    node.append("circle")
     .attr("r", function(d) { return node_size(d.group); })
     .attr("fill", function(d) { return node_color(d.typie); })
     .attr("class", "node");
     
    node.append("text")
     .text(function(d) { return d.name; })
     .attr("dx", 13)
     .attr("class", "label");
    
    force.on("tick", function() {
     link.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });
     node.attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });
     d3.selectAll("circle")
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });
     d3.selectAll("text")
      .attr("x", function(d) { return d.x; })
      .attr("y", function(d) { return d.y; });
    });
   });
   
   function link_color(c) {
				switch(c) {
					case 1:
						return "red";
					case 2:
						return "blue";
					default:
						return "#000";
				}
		 };
		 function link_width(c) {
				switch(c) {
					case 1: /* children */ 
						return 1;
					default:
						return 1;
				}
			};

			function node_size(gr) {
				if (gr == -1) { return 1; }
				return 4 * gr;
			};

			function node_color(type) {
				switch(type) {
					case "Immortal":
						return "#ccc";
					default:
						return "#333";
				}
			};
		 
  </script>
 </body>
</html>
